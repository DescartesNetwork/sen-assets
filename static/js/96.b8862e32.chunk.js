(globalThis.webpackChunksen_assets=globalThis.webpackChunksen_assets||[]).push([[96],{6947:(t,e,s)=>{"use strict";let a,i;s.d(e,{r:()=>a,G:()=>i}),function(t){t.Transfer="Transfer",t.Provider="Provider",t.SourceWallet="SourceWallet"}(a||(a={})),function(t){t.Transfer="Transfer",t.WaitSigned="WaitSigned",t.Redeem="Redeem",t.Finish="Finish",t.Unknown="Unknown"}(i||(i={}))},69833:(t,e,s)=>{"use strict";s.d(e,{bG:()=>a,BR:()=>i,eT:()=>r,oS:()=>n,ZN:()=>o,eb:()=>c,Uw:()=>d,_I:()=>h,gT:()=>l,EB:()=>u,tG:()=>f,d9:()=>g,NA:()=>w});const a=6371,i=30,r={mainnet:"0x98f3c9e6E3fAce36bAAd05FE09d375Ef1464288B",goerli:"0x706abc4E45D419950511e474C7B9Ed348A4a716c",ropsten:"0xC89Ce4735882C9F0f0FE26686c53074E09B0D550"},n={mainnet:"0x3ee18B2214AFF97000D974cf647E7C347E8fa585",goerli:"0xf890982f9310df57d00f659cf4fd87e65aded8d7",ropsten:"0x0290FB167208Af455bB137780163b7B7a9a10C16"},o={mainnet:1,goerli:5,ropsten:3},c={url:"https://deep-index.moralis.io/api/v2",apiKey:"N6yeIUl1FxCPZWbXyxLHWPAjSr6ahQeJTX3d19pSKCwHsLCzpWE7z1hilon4xDOd"},d="5eb1b92f2065414d9dd21858fac54257",h="ff3fa1218f644c85a7374e40014374f1",l={mainnet:`https://mainnet.infura.io/v3/${d}`,goerli:`https://goerli.infura.io/v3/${d}`,ropsten:`https://ropsten.infura.io/v3/${d}`},u={mainnet:`wss://mainnet.infura.io/ws/v3/${d}`,goerli:`wss://goerli.infura.io/ws/v3/${d}`,ropsten:`wss://ropsten.infura.io/ws/v3/${d}`},f={mainnet:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",goerli:"0xb4fbf271143f4fbf7b91a5ded31805e42b2208d6",ropsten:"0xc778417e063141139fce010982780140aa0cd5ab"},g="0x1",w="0x5"},97108:(t,e,s)=>{"use strict";s.d(e,{F:()=>a,h:()=>i});const a={mainnet:"worm2ZoG2kUd4vFXhvjh93UUH596ayRfgQ2MgjNMTth",testnet:"Brdguy7BmNB4qwEbcqqMbyV5CyJd2sxQNUn6NEpMSsUb",devnet:"3u8hJUVTA4jH1wYAyUur7FFZVQ8H635K3tSHHF4ssjQ5"},i={mainnet:"wormDTUJ6AWPNvk59vGQbDvGJmqbDTdgWgAqcLBCgUb",testnet:"A4Us8EhCC76XdGAN17L4KpRNEK423nMivVHZzZqFqqBg",devnet:"DZnkkTmCiFWfYTfT41X3Rd1kDgozqzxWaHqsw6W4x2oe"}},14393:(t,e,s)=>{"use strict";s.d(e,{DY:()=>i,vz:()=>r,Ii:()=>n});var a=s(28151);const i={mainnet:"https://wormhole-v2-mainnet-api.certus.one",testnet:"",devnet:"https://wormhole-v2-testnet-api.certus.one"},r=[{chainID:a.rQ,name:"Solana",logo:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png"},{chainID:a.ZN,name:"Ethereum",logo:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/2FPyTwcZLUg1MDrwsyoP4D6s1tM7hAkHYRjkNb5w6Pxk/logo.png"}],n="WohWallet"},34545:(t,e,s)=>{"use strict";s.d(e,{Rn:()=>c,rE:()=>d,rx:()=>h});var a=s(28151),i=s(69833),r=s(97108),n=s(14393),o=s(92050);const c=()=>{const t=(0,o.iR)();return{chainId:a.ZN,tokenBridgeAddress:i.oS[t],bridgeAddress:i.eT[t]}},d=()=>{const t=(0,o.FZ)();return{chainId:a.rQ,tokenBridgeAddress:r.h[t],bridgeAddress:r.F[t]}},h=t=>{const e=(0,o.FZ)(),s=c();return{id:(new Date).getTime()+""+Math.random(),time:(new Date).getTime(),srcChainId:s.chainId,srcTokenBridgeAddress:s.tokenBridgeAddress,srcBridgeAddress:s.bridgeAddress,targetChainId:a.rQ,targetTokenBridgeAddress:r.h[e],targetBridgeAddress:r.F[e],wormholeRpc:n.DY[e],tokenInfo:t}}},92050:(t,e,s)=>{"use strict";s.d(e,{FZ:()=>n,iR:()=>o,T7:()=>c,Ns:()=>d,a$:()=>h,AY:()=>l});s(28151);var a=s(95418),i=(s(6947),s(31049),s(53933)),r=s(3007);const n=()=>i.Z.get("network")||"mainnet",o=()=>"mainnet"===n()?"mainnet":"goerli",c=async(t,e)=>{const s=t.serialize(),a=await e.sendRawTransaction(s,{skipPreflight:!0,preflightCommitment:"confirmed"}),{value:{err:i}}=await e.confirmTransaction(a,"confirmed");if(i)throw new Error(`${i} at ${a}`);return a},d=async(t,e)=>{if(!a.account.isAddress(t))throw new Error("Invalid mint address");const s=await e.getAddress(),i=window.sentre.splt,r=await i.deriveAssociatedAddress(s,t);let n=!1;try{const{state:t}=await i.getAccountData(r);n=t>0}catch(o){n=!1}return n||await i.initializeAccount(t,s,e),r},h=async t=>{var e;const s=await(null===(e=window.sentre.wallet)||void 0===e?void 0:e.getAddress());if(!s)throw new Error("Wallet is not connected");return new r.Z(s).createInstance("wormhole").getItem(t)},l=async(t,e)=>{var s;const a=await(null===(s=window.sentre.wallet)||void 0===s?void 0:s.getAddress());if(!a)throw new Error("Wallet is not connected");return new r.Z(a).createInstance("wormhole").setItem(t,e)}},22858:(t,e,s)=>{"use strict";s.d(e,{O:()=>d});var a=s(28151),i=s(71256),r=s(6947),n=s(34559),o=s(92050),c=s(97429).Buffer;class d{constructor(){this.context=void 0,this.transferData=void 0,this.attestData=void 0,this.restore=async t=>{const e=JSON.parse(JSON.stringify(t));if(!t)throw new Error("Not find state transfer");this.transferData=e.transferData,this.attestData=e.attestData,this.context=e.context},this.transfer=async(t,e)=>{this.transferData||(this.transferData=await this.initTransferData(t));const{transferData:s}=this.getState(),{attested:a}=await this.isAttested();if(a||await this.attest(e),s.nextStep===r.G.Transfer){const{emitterAddress:t,sequence:a,txHash:i}=await this.submitTransfer();s.txHash=i,s.emitterAddress=t,s.sequence=a,s.nextStep=r.G.WaitSigned;const n=await this.backup();await e(n)}if(s.nextStep===r.G.WaitSigned){const t=await this.getSignedVAA(s.emitterAddress,s.sequence);s.vaaHex=t,s.nextStep=r.G.Redeem;const a=await this.backup();await e(a)}if(s.nextStep===r.G.Redeem){const t=await this.redeem(s.vaaHex);s.txId=t,s.nextStep=r.G.Finish;const a=await this.backup();return await e(a),t}throw new Error("Invalid step transfer")},this.backup=async()=>{const t=await d.fetchAll(),e=this.getState();return t[e.context.id]=e,(0,o.AY)(r.r.Transfer,t),e},this.getState=()=>{if(!this.transferData)throw new Error("Invalid data transfer");if(!this.context)throw new Error("Invalid context");return{transferData:this.transferData,context:this.context,attestData:this.attestData}},this.getSignedVAAWithRetry=async function(){let t=0;for(;;)try{console.log("Retry to get signed vaa:",++t);return await(0,a.RX)(...arguments)}catch(e){await(0,n.sA)(1e4)}},this.initTransferData=async t=>{throw new Error("Invalid function initTransferData")},this.isAttested=async()=>{throw new Error("Invalid function isAttested")},this.submitTransfer=async()=>{throw new Error("Invalid function submitTransfer")},this.submitAttest=async()=>{throw new Error("Invalid function submitAttest")},this.wrapToken=async t=>{throw new Error("Invalid function wrapToken")},this.redeem=async t=>{throw new Error("Invalid function redeem")},this.initAttestData=()=>(this.attestData||(this.attestData={step:0,sequence:"",emitterAddress:"",vaaHex:"",txId:""}),this.attestData),this.attest=async t=>{const e=this.initAttestData();if(0===e.step){const{emitterAddress:s,sequence:a}=await this.submitAttest();e.emitterAddress=s,e.sequence=a,e.step++;const i=await this.backup();await t(i)}if(1===e.step){const s=await this.getSignedVAA(e.emitterAddress,e.sequence);e.vaaHex=s,e.step++;const a=await this.backup();await t(a)}if(2===e.step){const s=await this.wrapToken(e.vaaHex);e.txId=s,e.step++;const a=await this.backup();return await t(a),s}throw new Error("Invalid step attest")}}getConnection(){const t=window.sentre.splt.nodeUrl;return new i.Connection(t,"confirmed")}async getSignedVAA(t,e){const{context:s}=this.getState(),{vaaBytes:a}=await this.getSignedVAAWithRetry(s.wormholeRpc,s.srcChainId,t,e);return c.from(a).toString("hex")}}d.fetchAll=async()=>{const t=await(0,o.a$)(r.r.Transfer);return JSON.parse(JSON.stringify(t))||{}}},31049:(t,e,s)=>{"use strict";s.d(e,{Z:()=>u});var a=s(28151),i=s(95418),r=s(92050),n=s(22858),o=s(6947),c=s(34545),d=s(69833),h=s(97429).Buffer;class l extends n.O{constructor(t,e,s){super(),this.srcWallet=void 0,this.targetWallet=void 0,this.isNative=()=>{var t;return(null===(t=this.context)||void 0===t?void 0:t.tokenInfo.address)===d.tG[(0,r.iR)()]},this.isAttested=async()=>{const{context:t}=this.getState(),e=await this.srcWallet.getProvider(),s=await(0,a.Ak)(t.srcTokenBridgeAddress,e,t.tokenInfo.address,a.ZN),i=await(0,a.sS)(this.getConnection(),t.targetTokenBridgeAddress,s.chainId,s.assetAddress);return{attested:!!i,wrappedMintAddress:i}},this.initTransferData=async t=>{const e=await this.srcWallet.getAddress(),s=await this.targetWallet.getAddress();return{nextStep:o.G.Transfer,amount:t,from:e,to:s,emitterAddress:"",sequence:"",vaaHex:"",txId:"",txHash:""}},this.submitTransfer=async()=>{const{transferData:t,context:e}=this.getState();let{wrappedMintAddress:s}=await this.isAttested();if(!s)throw new Error("Attest the token first");const n=(await this.srcWallet.getProvider()).getSigner(),o=i.utils.decimalize(t.amount,e.tokenInfo.decimals);await(0,a.YC)(e.srcTokenBridgeAddress,e.tokenInfo.address,n,o);const c=await(0,r.Ns)(s,this.targetWallet),d=this.isNative()?await(0,a.bo)(e.srcTokenBridgeAddress,n,o,a.rQ,i.account.fromAddress(c).toBuffer()):await(0,a.qC)(e.srcTokenBridgeAddress,n,e.tokenInfo.address,o,a.rQ,i.account.fromAddress(c).toBuffer());return{sequence:(0,a.N_)(d,e.srcBridgeAddress),emitterAddress:(0,a.Nz)(e.srcTokenBridgeAddress),txHash:d.transactionHash}},this.submitAttest=async()=>{const{context:t}=this.getState(),e=(await this.srcWallet.getProvider()).getSigner(),s=await(0,a.$6)(t.srcTokenBridgeAddress,e,t.tokenInfo.address);return{sequence:(0,a.N_)(s,t.srcBridgeAddress),emitterAddress:(0,a.Nz)(t.srcTokenBridgeAddress)}},this.wrapToken=async t=>{const{context:e}=this.getState(),s=await this.targetWallet.getAddress(),i=(0,a.GZ)(t);await(0,a.Pp)(this.getConnection(),this.targetWallet.signTransaction,e.targetBridgeAddress,s,h.from(i));const n=await(0,a.lx)(this.getConnection(),e.targetBridgeAddress,e.targetTokenBridgeAddress,s,i),o=await this.targetWallet.signTransaction(n);return await(0,r.T7)(o,this.getConnection())},this.redeem=async t=>{const{context:e}=this.getState(),s=await this.targetWallet.getAddress(),i=(0,a.GZ)(t);await(0,a.Pp)(this.getConnection(),this.targetWallet.signTransaction,e.targetBridgeAddress,s,h.from(i));const n=await(0,a.A7)(this.getConnection(),e.targetBridgeAddress,e.targetTokenBridgeAddress,s,i),o=await this.targetWallet.signTransaction(n);return await(0,r.T7)(o,this.getConnection())},this.srcWallet=t,this.targetWallet=e;const n=JSON.parse(JSON.stringify(s));this.context=(0,c.rx)(n)}}const u=l},67751:(t,e,s)=>{"use strict";s.d(e,{U:()=>i});var a=s(15822);class i{static set(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.qf;this.mapCache.set(t,e),setTimeout((()=>{this.mapCache.delete(t)}),s.ttl)}static get(t){return this.mapCache.get(t)}}i.mapCache=new Map},15822:(t,e,s)=>{"use strict";s.d(e,{qf:()=>a,Dt:()=>i});const a={ttl:3e4},i={limit:{calls:10,time:1e3},cache:a}},21411:(t,e,s)=>{"use strict";s.d(e,{R:()=>n});var a=s(15822),i=s(85964),r=s(67751);class n{static getSingleFlight(t){const e=JSON.stringify(t);if(this.mapInstance.has(e)){const t=this.mapInstance.get(e);if(t)return t}let s=new o(t);return this.mapInstance.set(e,s),s}static async load(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===typeof t&&(t=JSON.stringify(t));let a=n.getSingleFlight(s);n.mapInstance.set(t,a);const r=new i.g(t);return a.load(r,e)}}n.mapInstance=new Map;class o{constructor(t){this.config=void 0,this.intervalRequest=void 0,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(a.Dt,t)}async load(t,e){const s=r.U.get(t.key);if(s)return Promise.resolve(s);let a=!1,i=this.mapRequestCalling.get(t.key);return i||(i=t,a=!0,this.mapRequestCalling.set(i.key,i)),new Promise(((t,s)=>{if(!i)return s("Not found request!");i.add(t,s),a&&this.fetch(i,e)}))}fetch(t,e){if(!this.validateLimit())return this.addRequestQueue(t,e);this.createTimeLogs(),e().then((e=>{r.U.set(t.key,e,this.config.cache),t.resolves(e)})).catch((e=>{t.rejects(e)})).finally((()=>{this.mapRequestCalling.delete(t.key),this.fetchRequestQueue(e)}))}fetchRequestQueue(t){if(!this.validateLimit())return;const e=this.requestQueue.shift();e&&this.load(e,t),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(t,e){var s;this.requestQueue.push(t),this.intervalRequest=setInterval((()=>{this.fetchRequestQueue(e)}),null===(s=this.config.limit)||void 0===s?void 0:s.time)}validateLimit(){return!0}createTimeLogs(){var t;if(!this.config.limit)return;const e=(new Date).getTime();this.timeLogs.push(e),this.timeLogs.length>(null===(t=this.config.limit)||void 0===t?void 0:t.calls)&&this.timeLogs.shift()}}},85964:(t,e,s)=>{"use strict";s.d(e,{g:()=>a});class a{constructor(t){this.key="",this.resolveQueue=[],this.rejectQueue=[],this.key=t}add(t,e){this.resolveQueue.push(t),this.rejectQueue.push(e)}resolves(t){for(;this.resolveQueue.length>0;){this.resolveQueue.shift()(t)}}rejects(t){for(;this.rejectQueue.length>0;){this.rejectQueue.shift()(t)}}}},85912:(t,e,s)=>{"use strict";s.d(e,{$:()=>a,h:()=>i});const a=t=>!1;BigInt.prototype.toJSON=function(){return this.toString()};const i={serializableCheck:{isSerializable:t=>"undefined"===typeof t||null===t||"string"===typeof t||"boolean"===typeof t||"number"===typeof t||Array.isArray(t)||(t=>{if(null===t)return!1;const e=Object.getPrototypeOf(t);return null!==e&&null===Object.getPrototypeOf(e)})(t)||"bigint"===typeof t}}},3007:(t,e,s)=>{"use strict";s.d(e,{Z:()=>c});var a=s(15454),i=s.n(a),r=s(95418),n=s(83868);class o{constructor(t){if(this.dbName=void 0,this.driver=void 0,this.ipfs=void 0,this.createInstance=t=>i().createInstance({driver:this.driver,name:this.dbName,storeName:t}),this.dropInstance=async t=>{const e=this.createInstance(t);return await e.clear(),await i().dropInstance({name:this.dbName,storeName:t})},this.all=async()=>{let t={};const e=(await this.createInstance("sentre").getItem("appIds")||[]).flat().concat(["sentre"]);for(const s of e){t[s]={};const e=this.createInstance(s);await e.iterate(((e,a)=>{t[s][a]=e}))}return t},this.fetch=async t=>await this.ipfs.get(t),this.backup=async()=>{const t=await this.all();return await this.ipfs.set(t)},this.restore=async t=>{const e=await this.fetch(t);for(const s in e){const t=await this.createInstance(s);for(const a in e[s]){const i=e[s][a];await t.setItem(a,i)}}return e},!r.account.isAddress(t))throw new Error("Invalid address");this.dbName=t,this.driver=[i().WEBSQL,i().LOCALSTORAGE],this.ipfs=new n.Z}}const c=o},83868:(t,e,s)=>{"use strict";s.d(e,{Z:()=>o});var a=s(43912),i=s(34559),r=s(97429).Buffer;class n{constructor(){this._ipfs=async()=>{try{return window.ipfs||(window.ipfs=await(0,a.Ue)()),window.ipfs}catch(t){return await(0,i.sA)(500),await this._ipfs()}},this.get=async t=>{if(!n.isCID(t))throw new Error("Invalid CID");const e=await this._ipfs(),s=await e.cat(t);let a="";for await(const i of s)a+=r.from(i).toString();return JSON.parse(a)},this.set=async t=>{if(!t)throw new Error("Empty data");const e=JSON.stringify(t),s=await this._ipfs(),{path:a}=await s.add(e);return a}}}n.isCID=t=>{try{return!!t&&a.bf.multihash(t)}catch(e){return!1}};const o=n},63805:(t,e,s)=>{"use strict";s.d(e,{OB:()=>i,ef:()=>r});var a=s(53933);const i="production",r=(()=>{switch(a.Z.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}})()},53933:(t,e,s)=>{"use strict";s.d(e,{Z:()=>o});const a="sentre",i=window.localStorage,r=t=>{try{return t?JSON.parse(t):null}catch(e){return null}},n={set:(t,e)=>{let s=r(i.getItem(a));s&&"object"===typeof s||(s={}),s[t]=e,i.setItem(a,JSON.stringify(s))},get:t=>{let e=r(i.getItem(a));return e&&"object"===typeof e?e[t]:null},clear:t=>{n.set(t,null)}},o=n},34559:(t,e,s)=>{"use strict";s.d(e,{sA:()=>d,Xn:()=>h,kU:()=>l,JO:()=>u,uR:()=>f,p:()=>g,l$:()=>w});var a=s(95418),i=s(92050),r=s(16200),n=s.n(r),o=s(63805),c=s(21411);const d=t=>new Promise((e=>setTimeout(e,t))),h=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";return t.substring(0,e)+s+t.substring(t.length-e,t.length)},l=t=>a.account.isAddress(t)?`https://explorer.solana.com/address/${t}?cluster=${o.ef}`:`https://explorer.solana.com/tx/${t}?cluster=${o.ef}`,u=t=>"goerli"===(0,i.iR)()?`https://goerli.etherscan.io/tx/${t}`:`https://etherscan.io/tx/${t}`,f=t=>t?n()(t):n()("0"),g=(t,e)=>{let s=Math.floor(16777215*Math.random());if(t){s=0;for(let e=0;e<t.length;e++)s=t.charCodeAt(e)+((s<<5)-s)}var a=[0,0,0];for(let r=0;r<3;r++){var i=s>>8*r&255;a[r]=i}return`rgba(${a[0]}, 100, ${a[1]},${e||1})`},w=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return c.R.load("fetchCGK"+t,(()=>a.utils.parseCGK(t)))}},88677:()=>{},28608:()=>{},12328:()=>{},69159:()=>{},35883:()=>{},46601:()=>{},89214:()=>{},5696:()=>{},85568:()=>{},64009:()=>{},42611:()=>{},88795:()=>{},89408:()=>{},34845:()=>{},57600:()=>{},21724:()=>{},39370:()=>{},62678:()=>{},25819:()=>{},52361:()=>{},94616:()=>{},33370:()=>{},55024:()=>{}}]);
//# sourceMappingURL=96.b8862e32.chunk.js.map