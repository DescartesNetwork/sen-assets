(globalThis.webpackChunksen_assets=globalThis.webpackChunksen_assets||[]).push([[193],{69833:(t,e,s)=>{"use strict";s.d(e,{EB:()=>l,MT:()=>c,NA:()=>w,ZN:()=>a,d9:()=>f,eT:()=>i,eb:()=>r,gT:()=>h,oS:()=>n,rW:()=>d,tG:()=>g,xb:()=>u});const i={mainnet:"0x98f3c9e6E3fAce36bAAd05FE09d375Ef1464288B",goerli:"0x706abc4E45D419950511e474C7B9Ed348A4a716c",ropsten:"0xC89Ce4735882C9F0f0FE26686c53074E09B0D550"},n={mainnet:"0x3ee18B2214AFF97000D974cf647E7C347E8fa585",goerli:"0xf890982f9310df57d00f659cf4fd87e65aded8d7",ropsten:"0x0290FB167208Af455bB137780163b7B7a9a10C16"},a={mainnet:1,goerli:5,ropsten:3},r={url:"https://deep-index.moralis.io/api/v2",apiKey:"N6yeIUl1FxCPZWbXyxLHWPAjSr6ahQeJTX3d19pSKCwHsLCzpWE7z1hilon4xDOd"},o="5eb1b92f2065414d9dd21858fac54257",d="c1ef76acebf44e5cbada1ae17be73e2b",c="b7028ecb8307456ba2e7a32281620a85",h={mainnet:`https://mainnet.infura.io/v3/${o}`,goerli:`https://goerli.infura.io/v3/${o}`,ropsten:`https://ropsten.infura.io/v3/${o}`},l={mainnet:`wss://mainnet.infura.io/ws/v3/${o}`,goerli:`wss://goerli.infura.io/ws/v3/${o}`,ropsten:`wss://ropsten.infura.io/ws/v3/${o}`},g={mainnet:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",goerli:"0xb4fbf271143f4fbf7b91a5ded31805e42b2208d6",ropsten:"0xc778417e063141139fce010982780140aa0cd5ab"},u={mainnet:"0x0000000000000000000000000000000000000000",goerli:"0x0000000000000000000000000000000000000000",ropsten:"0x0000000000000000000000000000000000000000"},f="0x1",w="0x5"},34545:(t,e,s)=>{"use strict";s.d(e,{qQ:()=>l,rx:()=>h});var i=s(28151),n=s(69833),a=s(97108),r=s(14393),o=s(92050),d=s(15190);const c=()=>{const t=(0,o.iR)();return{chainId:i.ZNg,tokenBridgeAddress:n.oS[t],bridgeAddress:n.eT[t]}},h=t=>{const e=d.ef,s=c();return{id:(new Date).getTime()+""+Math.random(),time:(new Date).getTime(),srcChainId:s.chainId,srcTokenBridgeAddress:s.tokenBridgeAddress,srcBridgeAddress:s.bridgeAddress,targetChainId:i.rQA,targetTokenBridgeAddress:a.h[e],targetBridgeAddress:a.F[e],wormholeRpc:r.DY[e],tokenInfo:t}},l=t=>{const e=d.ef,s=(()=>{const t=d.ef;return{chainId:i.rQA,tokenBridgeAddress:a.h[t],bridgeAddress:a.F[t]}})(),{chainId:n,tokenBridgeAddress:o,bridgeAddress:h}=c();return{id:(new Date).getTime()+""+Math.random(),time:(new Date).getTime(),srcChainId:s.chainId,srcTokenBridgeAddress:s.tokenBridgeAddress,srcBridgeAddress:s.bridgeAddress,targetChainId:n,targetTokenBridgeAddress:o,targetBridgeAddress:h,wormholeRpc:r.DY[e],tokenInfo:t}}},92050:(t,e,s)=>{"use strict";s.d(e,{AY:()=>h,Ns:()=>d,T7:()=>o,a$:()=>c,iR:()=>r});s(28151);var i=s(95418),n=(s(6947),s(31049),s(3007)),a=s(15190);const r=()=>"mainnet"===a.ef?"mainnet":"goerli",o=async(t,e)=>{const s=t.serialize(),i=await e.sendRawTransaction(s,{skipPreflight:!0,preflightCommitment:"confirmed"}),{value:{err:n}}=await e.confirmTransaction(i,"confirmed");if(n)throw new Error(`${n} at ${i}`);return i},d=async(t,e)=>{if(!i.account.isAddress(t))throw new Error("Invalid mint address");const s=await e.getAddress(),n=window.sentre.splt,a=await n.deriveAssociatedAddress(s,t);let r=!1;try{const{state:t}=await n.getAccountData(a);r=t>0}catch(o){r=!1}return r||await n.initializeAccount(t,s,e),a},c=async t=>{var e;const s=await(null===(e=window.sentre.wallet)||void 0===e?void 0:e.getAddress());if(!s)throw new Error("Wallet is not connected");return new n.Z(s).createInstance("wormhole").getItem(t)},h=async(t,e)=>{var s;const i=await(null===(s=window.sentre.wallet)||void 0===s?void 0:s.getAddress());if(!i)throw new Error("Wallet is not connected");return new n.Z(i).createInstance("wormhole").setItem(t,e)}},22858:(t,e,s)=>{"use strict";s.d(e,{O:()=>c});var i=s(28151),n=s(71256),a=s(6947),r=s(34559),o=s(92050),d=s(97429).Buffer;class c{constructor(){this.context=void 0,this.transferData=void 0,this.attestData=void 0,this.getContext=()=>{if(!this.context)throw new Error("Invalid context");return this.context},this.restore=async t=>{const e=JSON.parse(JSON.stringify(t));if(!t)throw new Error("Not find state transfer");this.transferData=e.transferData,this.attestData=e.attestData,this.context=e.context},this.transfer=async(t,e)=>{const s=this.getContext();this.transferData||(this.transferData=await this.initTransferData(t));const{transferData:i}=this.getState(),{attested:n}=await this.isAttested();if(n||await this.attest(e),i.nextStep===a.G.Transfer){const{emitterAddress:t,sequence:n,txHash:r}=await this.submitTransfer();s.id=r,i.txHash=r,i.emitterAddress=t,i.sequence=n,i.nextStep=a.G.WaitSigned;const o=await this.backup();await e(o)}if(i.nextStep===a.G.WaitSigned){const t=await this.getSignedVAA(i.emitterAddress,i.sequence);i.vaaHex=t,i.nextStep=a.G.Redeem;const s=await this.backup();await e(s)}if(i.nextStep===a.G.Redeem){const t=await this.redeem(i.vaaHex);i.txId=t,i.nextStep=a.G.Finish;const s=await this.backup();return await e(s),t}throw new Error("Invalid step transfer")},this.backup=async()=>{const t=await c.fetchAll(),e=this.getState();return t[e.context.id]=e,(0,o.AY)(a.r.Transfer,t),e},this.getState=()=>{if(!this.transferData)throw new Error("Invalid data transfer");if(!this.context)throw new Error("Invalid context");return{transferData:this.transferData,context:this.context,attestData:this.attestData}},this.getSignedVAAWithRetry=async function(){let t=0;for(;;)try{console.log("Retry to get signed vaa:",++t);return await(0,i.RX)(...arguments)}catch(e){await(0,r.sA)(1e4)}},this.initTransferData=async t=>{throw new Error("Invalid function initTransferData")},this.isAttested=async()=>{throw new Error("Invalid function isAttested")},this.submitTransfer=async()=>{throw new Error("Invalid function submitTransfer")},this.submitAttest=async()=>{throw new Error("Invalid function submitAttest")},this.wrapToken=async t=>{throw new Error("Invalid function wrapToken")},this.redeem=async t=>{throw new Error("Invalid function redeem")},this.initAttestData=()=>(this.attestData||(this.attestData={step:0,sequence:"",emitterAddress:"",vaaHex:"",txId:""}),this.attestData),this.attest=async t=>{const e=this.initAttestData();if(0===e.step){const{emitterAddress:s,sequence:i}=await this.submitAttest();e.emitterAddress=s,e.sequence=i,e.step++;const n=await this.backup();await t(n)}if(1===e.step){const s=await this.getSignedVAA(e.emitterAddress,e.sequence);e.vaaHex=s,e.step++;const i=await this.backup();await t(i)}if(2===e.step){const s=await this.wrapToken(e.vaaHex);e.txId=s,e.step++;const i=await this.backup();return await t(i),s}throw new Error("Invalid step attest")}}getConnection(){const t=window.sentre.splt.nodeUrl;return new n.Connection(t,"confirmed")}async getSignedVAA(t,e){const{context:s}=this.getState(),{vaaBytes:i}=await this.getSignedVAAWithRetry(s.wormholeRpc,s.srcChainId,t,e);return d.from(i).toString("hex")}}c.fetchAll=async()=>{const t=await(0,o.a$)(a.r.Transfer);return JSON.parse(JSON.stringify(t))||{}}},31049:(t,e,s)=>{"use strict";s.d(e,{Z:()=>g});var i=s(28151),n=s(95418),a=s(92050),r=s(22858),o=s(6947),d=s(34545),c=s(69833),h=s(97429).Buffer;class l extends(674==s.j?r.O:null){constructor(t,e,s){super(),this.srcWallet=void 0,this.targetWallet=void 0,this.isNative=()=>{var t;return(null===(t=this.context)||void 0===t?void 0:t.tokenInfo.address)===c.xb[(0,a.iR)()]},this.isAttested=async()=>{const{context:t}=this.getState(),e=await this.srcWallet.getProvider(),s=(0,a.iR)();let n=t.tokenInfo.address;n===c.xb[s]&&(n=c.tG[s]);const r=await(0,i.Akg)(t.srcTokenBridgeAddress,e,n,i.ZNg),o=await(0,i.sSh)(this.getConnection(),t.targetTokenBridgeAddress,r.chainId,r.assetAddress);return{attested:!!o,wrappedMintAddress:o}},this.initTransferData=async t=>{const e=await this.srcWallet.getAddress(),s=await this.targetWallet.getAddress();return{nextStep:o.G.Transfer,amount:t,from:e,to:s,emitterAddress:"",sequence:"",vaaHex:"",txId:"",txHash:""}},this.submitTransfer=async()=>{const{transferData:t,context:e}=this.getState();let{wrappedMintAddress:s}=await this.isAttested();if(!s)throw new Error("Attest the token first");const r=(await this.srcWallet.getProvider()).getSigner(),o=n.utils.decimalize(t.amount,e.tokenInfo.decimals);await(0,i.YCz)(e.srcTokenBridgeAddress,e.tokenInfo.address,r,o);const d=await(0,a.Ns)(s,this.targetWallet),c=this.isNative()?await(0,i.boL)(e.srcTokenBridgeAddress,r,o,i.rQA,n.account.fromAddress(d).toBuffer()):await(0,i.qCE)(e.srcTokenBridgeAddress,r,e.tokenInfo.address,o,i.rQA,n.account.fromAddress(d).toBuffer());return{sequence:(0,i.N_w)(c,e.srcBridgeAddress),emitterAddress:(0,i.Nzl)(e.srcTokenBridgeAddress),txHash:c.transactionHash}},this.submitAttest=async()=>{const{context:t}=this.getState(),e=(await this.srcWallet.getProvider()).getSigner(),s=await(0,i.$6T)(t.srcTokenBridgeAddress,e,t.tokenInfo.address);return{sequence:(0,i.N_w)(s,t.srcBridgeAddress),emitterAddress:(0,i.Nzl)(t.srcTokenBridgeAddress)}},this.wrapToken=async t=>{const{context:e}=this.getState(),s=await this.targetWallet.getAddress(),n=(0,i.GZw)(t);await(0,i.PpG)(this.getConnection(),this.targetWallet.signTransaction,e.targetBridgeAddress,s,h.from(n));const r=await(0,i.lxM)(this.getConnection(),e.targetBridgeAddress,e.targetTokenBridgeAddress,s,n),o=await this.targetWallet.signTransaction(r);return await(0,a.T7)(o,this.getConnection())},this.redeem=async t=>{const{context:e}=this.getState(),s=await this.targetWallet.getAddress(),n=(0,i.GZw)(t);await(0,i.PpG)(this.getConnection(),this.targetWallet.signTransaction,e.targetBridgeAddress,s,h.from(n));const r=await(0,i.A7q)(this.getConnection(),e.targetBridgeAddress,e.targetTokenBridgeAddress,s,n),o=await this.targetWallet.signTransaction(r);return await(0,a.T7)(o,this.getConnection())},this.srcWallet=t,this.targetWallet=e;const r=JSON.parse(JSON.stringify(s));this.context=(0,d.rx)(r)}}const g=674==s.j?l:null},21411:(t,e,s)=>{"use strict";s.d(e,{R:()=>r});var i=s(15822),n=s(85964),a=s(67751);class r{static getSingleFlight(t){const e=JSON.stringify(t);if(this.mapInstance.has(e)){const t=this.mapInstance.get(e);if(t)return t}let s=new o(t);return this.mapInstance.set(e,s),s}static async load(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===typeof t&&(t=JSON.stringify(t));let i=r.getSingleFlight(s);r.mapInstance.set(t,i);const a=new n.g(t);return i.load(a,e)}}r.mapInstance=new Map;class o{constructor(t){this.config=void 0,this.intervalRequest=void 0,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(i.Dt,t)}async load(t,e){const s=a.U.get(t.key);if(s)return Promise.resolve(s);let i=!1,n=this.mapRequestCalling.get(t.key);return n||(n=t,i=!0,this.mapRequestCalling.set(n.key,n)),new Promise(((t,s)=>{if(!n)return s("Not found request!");n.add(t,s),i&&this.fetch(n,e)}))}fetch(t,e){if(!this.validateLimit())return this.addRequestQueue(t,e);this.createTimeLogs(),e().then((e=>{a.U.set(t.key,e,this.config.cache),t.resolves(e)})).catch((e=>{t.rejects(e)})).finally((()=>{this.mapRequestCalling.delete(t.key),this.fetchRequestQueue(e)}))}fetchRequestQueue(t){if(!this.validateLimit())return;const e=this.requestQueue.shift();e&&this.load(e,t),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(t,e){var s;this.requestQueue.push(t),this.intervalRequest=setInterval((()=>{this.fetchRequestQueue(e)}),null===(s=this.config.limit)||void 0===s?void 0:s.time)}validateLimit(){return!0}createTimeLogs(){var t;if(!this.config.limit)return;const e=(new Date).getTime();this.timeLogs.push(e),this.timeLogs.length>(null===(t=this.config.limit)||void 0===t?void 0:t.calls)&&this.timeLogs.shift()}}},67289:(t,e,s)=>{"use strict";s.d(e,{Z:()=>h});var i=s(94757),n=s.n(i),a=s(67845),r=s(15190);const o=t=>({symbol:"SOL",name:"Solana",address:"11111111111111111111111111111111",decimals:9,chainId:t,extensions:{coingeckoId:"solana"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png"}),d=t=>({symbol:"SNTR",name:"Sentre",address:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",decimals:9,chainId:t,extensions:{coingeckoId:"sentre"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M/logo.png"}),c=[o(103),d(103),{symbol:"wBTC",name:"Wrapped Bitcoin",address:"8jk4eJymMfNZV9mkRNxJEt2VJ3pRvdJvD5FE94GXGBPM",decimals:9,chainId:103,extensions:{coingeckoId:"bitcoin"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/qfnqNqs3nCAHjnyCgLRDbBtq4p2MtHZxw8YjSyYhPoL/logo.png"},{symbol:"wETH",name:"Ethereum",address:"27hdcZv7RtuMp75vupThR3T4KLsL61t476eosMdoec4c",decimals:9,chainId:103,extensions:{coingeckoId:"ethereum"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/FeGn77dhg1KXRRFeSwwMiykZnZPw5JXW6naf2aQgZDQf/logo.png"},{symbol:"UNI",name:"Uniswap",address:"FVZFSXu3yn17YdcxLD72TFDUqkdE5xZvcW18EUpRQEbe",decimals:9,chainId:103,extensions:{coingeckoId:"uniswap"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/3MVa4e32PaKmPxYUQ6n8vFkWtCma68Ld7e7fTktWDueQ/logo.png"},{symbol:"USDC",name:"USD Coin",address:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",decimals:9,chainId:103,extensions:{coingeckoId:"usd-coin"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"}];const h=class{constructor(){var t=this;this.tokenMap=void 0,this.engine=void 0,this.chainId=void 0,this.cluster=void 0,this.loading=void 0,this.queue=void 0,this._init=async()=>this.tokenMap.size&&this.engine?[this.tokenMap,this.engine]:new Promise((async t=>{if(this.loading)return this.queue.push(t);this.loading=!0;let e=await(await(new a.DK).resolve()).filterByChainId(this.chainId).getList();for("devnet"===this.cluster&&(e=e.concat(c)),e="testnet"===this.cluster?e.concat([d(102),o(102)]):e.concat([o(101)]),e.forEach((t=>this.tokenMap.set(t.address,t))),this.engine=n()((function(){this.ref("address"),this.field("symbol"),this.field("name"),e.forEach((t=>this.add(t)))})),t([this.tokenMap,this.engine]);this.queue.length;)this.queue.shift()([this.tokenMap,this.engine]);this.loading=!1})),this.all=async()=>{const[t]=await this._init();return Array.from(t.values())},this.findByAddress=async t=>{const[e]=await this._init();return e.get(t)},this.find=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const[i,n]=await t._init();let a=[];if(!e)return[];const r=e+"~1";return console.log("Debug OS Isolation:","sen_assets",r),n.search(r).forEach((t=>{let{ref:e}=t;if(a.findIndex((t=>{let{address:s}=t;return s===e}))<0){const t=i.get(e);t&&a.push(t)}})),a.slice(0,s)},this.tokenMap=new Map,this.engine=void 0,this.chainId=r.Bv,this.cluster=r.ef,this.loading=!1,this.queue=[],this._init()}}},34559:(t,e,s)=>{"use strict";s.d(e,{JO:()=>g,Xn:()=>h,kU:()=>l,l$:()=>w,p:()=>f,sA:()=>c,uR:()=>u});var i=s(95418),n=s(92050),a=s(16200),r=s.n(a),o=s(15190),d=s(21411);const c=t=>new Promise((e=>setTimeout(e,t))),h=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";return t.substring(0,e)+s+t.substring(t.length-e,t.length)},l=t=>i.account.isAddress(t)?`https://explorer.solana.com/address/${t}?cluster=${o.ef}`:`https://explorer.solana.com/tx/${t}?cluster=${o.ef}`,g=t=>"goerli"===(0,n.iR)()?`https://goerli.etherscan.io/tx/${t}`:`https://etherscan.io/tx/${t}`,u=t=>t?r()(t):r()("0"),f=(t,e)=>{let s=Math.floor(16777215*Math.random());if(t){s=0;for(let e=0;e<t.length;e++)s=t.charCodeAt(e)+((s<<5)-s)}var i=[0,0,0];for(let a=0;a<3;a++){var n=s>>8*a&255;i[a]=n}return`rgba(${i[0]}, 100, ${i[1]},${e||1})`},w=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return d.R.load("fetchCGK"+t,(()=>i.utils.parseCGK(t)))}},28608:()=>{}}]);
//# sourceMappingURL=193.197c4b1d.chunk.js.map